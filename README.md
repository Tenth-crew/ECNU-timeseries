# 一个新的GitHub仓库活跃度评估指标

## 初步介绍

本文为笔者这段时间来的实验工作，工作已组织为论文，为方便组委会审阅，该内容为简略版本。

## 摘要

随着开源模式以公开，共享的特点被人们广泛接受和认可后，GitHub作为世界上最大的开源软件平台，其开源软件（OSS）仓库数量迎来了飞速增长。在2024年，有高达108 million的仓库被创建。这些仓库相互依赖共同构成了许多软件生态，同时也成为了生活中数字基础设施的一部分。但是大部分仓库无法保持长期活跃，这对计算机领域和我们的日常生活都造成了很大的影响。为了找出能够长期保持活跃的仓库，我们设计了一个新颖的OSS仓库长期活跃度评估方法。该方法创新性的利用时间序列预测模型获取仓库未来的发展趋势，并首次将开发者活跃周期引入了OSS仓库发展趋势预测。接着我们利用发展趋势中的活动指标数据的统计量，结合我们提出的新公式对仓库活跃度进行了全面的评估。在实现过程中，我们设计了一个适用于OSS仓库活动指标时间序列预测任务的全面，公平基准数据集。找出了最适合OSS领域的活动指标预测模型，也验证了我们所提出的活跃度公式的可靠性。我们相信我们的工作能够更好的找出保持长期活跃的仓库，促进开源领域的蓬勃发展。

## 研究问题

本文主要聚焦于利用开源软件仓库未来的活动指标评估其如今的活跃度。特别的，本文希望能够回答如下问题。

RQ1: *如何使用时间序列预测模型去全面的预测repositories发展趋势？*OSS仓库的发展趋势通过其活动指标体现。但由于种种原因，直接使用时间序列预测模型进行预测的效果非常差，我们将研究如何使时间序列预测模型对OSS仓库活动指标进行全面、准确的预测。

RQ2: *如何评估一个OSS仓库的活跃度？*OSS仓库难以长期发展的问题对仓库拥有者、参与者以及开源社区用户造成了维护和选择等困扰。我们将研究如何评估OSS仓库的活跃度并验证其效果，这可以为受到困扰的人提供帮助。

RQ3: *不同类型的项目活跃度上有何差异？*GitHub社区上的开源仓库有许多不同的类型，它们的编程语言和许可证等其他方面各有不同。我们将研究不同的类型的仓库在活跃度上的差异，挖掘出帮助仓库维持长期活跃的方法。

## 实验方法概览

我们的研究方法的概述如下图所示。我们采集GitHub上OSS仓库的event data后，对原始数据进行清洗，包括异常值处理，数据平滑与放缩。接着我们利用时间序列预测模型结合开发者活动周期对每个活动指标进行预测，在获得仓库未来一段时间的活动指标后提取其中的平均值，结合我们提出的活跃度公式，最后得到一个OSS仓库的活跃程度。

![主框图v2.1.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734154308020-a3fa9fa2-7be3-4b6e-a16b-308855234f0a.png?x-oss-process=image%2Fformat%2Cwebp)

## 实验结果

### RQ1: *如何使用时间序列预测模型去全面的预测repositories发展趋势？*

本文研究了如何预测OSS（开放源代码软件）仓库的活动指标时间序列数据，并提出了一种有效的数据处理和预测方法。由于OSS仓库的活动数据容易受到人为因素干扰，并且具有非线性、周期性和偏态分布的特点，直接使用传统时间序列预测模型效果较差。为此，文章对原始数据进行了异常值处理、数据平滑和数据放缩，以提升预测精度。

在设定时间序列预测模型时，主要影响因素为回看长度和预测长度。基于研究结果，假定仓库参与者的活跃时间与工作日和周末的活动规律相关，作者设置周期为7天，并将预测长度设置为12个周期（约84天）。回看窗口长度也设置为12个周期。该方法利用了周期性特征，为预测模型提供了更多的信息。下图未vscode仓库在openPR指标上的预测效果。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734505721232-e6c41663-0ee3-49b0-b587-93c986dd88bd.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_412%2Climit_0)

为了评估模型的预测效果，本文引入了均方误差（MSE）和平均绝对误差（MAE）作为评价指标。通过对比不同时间序列预测模型（如PatchTST和TimesNet），发现PatchTST模型表现最佳，在MSE和MAE上均优于其他模型。PatchTST模型引入了patch方法，使得模型能够捕捉更多的局部语义信息，并减少计算量。实验证明，PatchTST模型在实际预测中能够很好地拟合周期性和实际值。

|  LOSS   | Autoformer | iTransformer | Nonstationary_Transformer | TimesNet | PatchTST  |
| :-----: | :--------: | :----------: | :-----------------------: | :------: | :-------: |
| MSE_AVG |   5.096    |    4.872     |           4.852           |  5.148   | **4.660** |
| MAE_AVG |   1.071    |    0.939     |           0.973           |  0.980   | **0.903** |

此外，本文还验证了数据清洗对预测效果的改善。通过对比清洗前后的数据，结果显示数据清洗后的预测误差较低，且整体预测表现提升了47.5%，证明了数据预处理的重要性。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734505429643-cbe608df-bca5-4d91-ac4a-4b462d12c387.png?x-oss-process=image%2Fformat%2Cwebp)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734505015223-33bbc471-992b-47de-8aba-7f984e381c9c.png?x-oss-process=image%2Fformat%2Cwebp)

### RQ2: *如何评判一个开源项目的活跃度？*

本文提出了一种创新性的活跃度评估方法，用于全面评估OSS（开放源代码软件）仓库的活跃度。该方法通过考虑仓库未来的发展趋势，结合未来12个周期的活动指标数据，计算出一个综合的活跃度分数。具体的计算方式通过对活动指标进行Sigmoid映射和放缩操作，将结果转换为百分制。此方法的优势在于：

1. **基于未来视角**：活跃度分数不仅考虑仓库当前的活动情况，还结合了对未来活动趋势的预测。
2. **公平统一**：通过最大最小值放缩，消除了不同仓库之间活动指标的绝对值差异，使得活跃度分数能够反映仓库的相对发展趋势。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734509847060-afc35de2-a7cc-4926-851f-26e18a5c87f6.png?x-oss-process=image%2Fformat%2Cwebp)

为了验证活跃度分数的现实意义，文章使用了活动指标累积增量的平均斜率作为衡量标准。平均斜率反映了活动指标随时间的变化速率，用来评估仓库发展是否迅猛。实验结果表明，活跃度分数与平均斜率之间呈现显著的正相关关系，且无论是通过直线拟合还是曲线拟合，最佳拟合曲线都表现为单调递增。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1735558697132-6152b847-80c3-455c-959b-e35110d37213.png?x-oss-process=image%2Fformat%2Cwebp)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734511611581-a2c5a4f8-9d80-4b7f-a748-f6beebd97d4c.png?x-oss-process=image%2Fformat%2Cwebp)

进一步地，文章通过计算**Spearman相关系数**和**Pearson相关系数**，量化了活跃度分数与平均斜率之间的关系。结果显示，二者具有极高的正相关性，Spearman系数为0.95，Pearson系数为0.92，证明了活跃度分数的有效性。同时，分析发现，OpenPR活动指标与活跃度分数的正相关性最强，表明活跃的仓库通常具有较多的OpenPR。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734518309722-bbf9774b-2af3-4a6e-86ab-024d2b0f8977.png?x-oss-process=image%2Fformat%2Cwebp)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734512148460-198b2a4c-aacb-4e9b-825e-bc814b2d07b7.png?x-oss-process=image%2Fformat%2Cwebp)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734512151641-7b0f784f-88ab-4a9e-a3ab-7280c25e9088.png?x-oss-process=image%2Fformat%2Cwebp)

### RQ3: *不同类型的项目活跃度上有何差异？*

本文探讨了不同编程语言、用户类别和许可证类型对OSS仓库活跃度的影响。

1. **编程语言对活跃度的影响**：
   数据集中的仓库编程语言分布显示，JavaScript占比最高（24.7%），而C++占比最低（6%）。通过对不同编程语言仓库的活跃度分数进行分析，发现**TypeScript**仓库的得分最高（64.67分），而**Swift**仓库的得分最低（34.7分）。进一步分析发现，TypeScript仓库在**MergePR**和**OpenPR**的增长速度上表现优异，表明仓库的长期活跃度与PR的创建和合并密切相关。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734589966270-b4437eaa-25c7-4565-8cf2-fc88c156591e.png?x-oss-process=image%2Fformat%2Cwebp)

2. **用户类别对活跃度的影响**：
   数据集中组织用户占比62.7%，个人用户占比37.3%。对比分析发现，组织用户的仓库在各项活动指标上的增长速度远超个人用户，尤其在PR评论的增长速度上，个人用户仓库的增长速度仅为组织用户的29.2%。这一差异可能是因为个人用户仓库缺乏足够的核心贡献者，导致无法高效处理代码审查和PR管理，从而影响仓库的活跃度。

3. **许可证类型对活跃度的影响**：
   数据集中的仓库使用了不同类型的许可证，其中**AGPL3.0**许可证类别的仓库得分最高（70.52分），而**CC0**许可证类别的仓库得分最低（25.74分）。AGPL3.0要求修改后的代码必须公开，这种强制公开源代码的要求促进了开源项目中的用户交流和代码质量的提升，从而提高了仓库的活跃度。相比之下，使用CC0许可证的仓库通常是一些内容完成后缺乏长期维护的文本性质项目，因此其活跃度较低。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/39023202/1734595561131-7b6aaa14-0553-4e58-86f2-77d9e276bb68.png?x-oss-process=image%2Fformat%2Cwebp)

## 对结果的讨论

我们通过对OSS仓库活动指标数据集进行针对性的清洗工作，克服了数据集中人为因素干扰以及偏态分布的特征。也找到我们调查范围中最适合OSS领域的时间序列预测模型：PatchTST，并且我们结合了开发者活动的周期，使得我们能够准确的预测仓库的发展趋势，最终挖掘出其中具有代表性的统计量。此外，我们对提出的活跃度评估公式进行了有效性验证，表明其能够准确评估仓库的长期活跃度。

在不同类型的仓库的长期活跃程度的分析中，我们发现PR相关的活动指标在长期活跃评估结果上有更多的贡献，表明代码相关的活动更能够帮助仓库保持长期活跃。这个结论在用户类别对活跃程度的影响中得到了进一步的验证，以为组织用户相比于个人用户，在PR相关的活动指标上的差距大于issue相关的活动指标。最后在仓库许可证的研究上，我们分析得出AGPL3.0的许可证往往使得仓库保持较高的活动水平。

对研究人员来说，他们可以利用本文提出的数据集进行更多不一样的OSS仓库时间序列预测任务，无须再进行更多的数据处理操作。同时，本文首次在OSS领域的时间序列预测任务上引入了开发者活动周期的概念，为该领域的预测任务提供了一个有力的补充。在仓库活跃程度的评估上，也为其他研究者提供了对于未来发展趋势利用的新视角。

对于开源领域来说，公司可以通过我们的评估方法选择出能保持长期活跃的仓库，从而在更小的风险下构建出保持长期活跃的OSS生态。开源参与者还能够从我们的分析结果中得出保持长期活跃度的更好的方法，例如注重仓库PR相关的活动指标，选择合适的许可证等等。通过识别出能够长期活跃仓库，避免参与者们时间或者精力的浪费，使得开源领域以更快的速度向前发展。

## 结论

在本文中，为了识别出能够保持长期活跃的OSS仓库，我们提出了一个新颖的方法评估仓库的长期活跃程度。该方法创新性利用仓库的未来发展趋势信息进行活跃度评估，也首次将开发者活跃周期引入了OSS领域的时间序列预测任务。在获取仓库未来发展趋势的过程中，我们制作了一份OSS仓库活动指标时间序列数据集，涵盖40余种编程语言，19种许可证，总计拥有约450k的数据量。此外，我们通过实验分析找到了最适合OSS领域时间序列预测任务的模型：PatchTST。并在该模型验证了数据预处理上的有效性，模型的预测效果平均改善了47.5%。

对于我们所提出的活跃度公式，我们通过活动指标的平均斜率以及分数与平均斜率的相关系数验证了分数的有效性。进一步的，我们利用该评估方法对不同类型的仓库进行研究，挖掘出了不同类型仓库之间的差异以及保持仓库长期活跃度更好的措施。

本文的工作为其他研究人员提供了评估仓库活跃程度的新视角。同时本文在识别长期活跃仓库的贡献将能够帮助开源参与者集中在优秀的项目上，避免时间和精力的浪费，促进开源领域加速发展。未来我们将继续对数据集和OSS仓库活跃度的评估方式进行改进，使得我们可以获得更优秀，更准确的评估效果。

## 使用方法

1. 安装python3.8，建议使用anaconda创建虚拟环境，使用如下命令安装必要的包

```python
pip install -r requirements.txt
```

2. 训练和评估模型。我们提供了数据训练所需要使用的脚本，你可以通过如下命令运行test脚本，该脚本将对dataset/language/Detail_repo/TypeScript/vscode_all_roll_ewma_span28_normalize.csv文件进行训练和测试

```python
bash ./scripts/long_term_forecast/test.sh
```

3. 输出的预测结果将会保存到results文件夹，可视化结果将保存到test_results文件夹中。测试结果的误差将保留到result_long_term_forecast.txt中。
4. workresult文件夹中包含实验结果的一些统计记录，例如测试误差，分数与平均斜率等等。

